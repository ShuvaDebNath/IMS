<div class="m-2 p-2 shadow-sm">
  <div class="row d-flex justify-content-center">
    <div class="">
      <div class="card card-default">
        <div class="card-header">
          <h2 class="">
            {{ !isEdit ? "Create" : "Update" }} <br />
            <span class="">Cash Receive</span>
          </h2>
        </div>
        <div class="card-body">
      
          <!-- Parent wrapper for centering -->
          <div class="d-flex justify-content-center mt-4">
            <form [formGroup]="Formgroup" [style]="{ width: '90%' }">
              <div class="row g-3 align-items-center mb-2">
               
                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Marketing Concern <span>*</span></label
                  >
                  <div class="col-7">
                    <p-dropdown
                      [style]="{ width: '100%' }"
                      [options]="MarketingConcern"
                      optionLabel="UserName"
                      [filter]="true"
                      filterBy="UserName"
                      [showClear]="true"
                      placeholder="Please Select"
                      optionValue="User_ID"
                      formControlName="Marketing_Concern"
                      [readonly]="isEdit"
                    >
                      <ng-template let-item pTemplate="item">
                        <div>{{ item.UserName }}</div>
                      </ng-template>
                    </p-dropdown>
                  </div>
                </div>
                <div class="col-md-2"></div>
                
                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Benificiary Bank <span>*</span></label
                  >
                  <div class="col-7">
                    <p-dropdown
                      [style]="{ width: '100%' }"
                      [options]="BenificiaryAccounts"
                      optionLabel="BankName"
                      [filter]="true"
                      filterBy="BankName"
                      [showClear]="true"
                      placeholder="Please Select"
                      optionValue="Beneficiary_Bank_ID"
                      formControlName="BenificiaryAccounts"
                    >
                      <ng-template let-item pTemplate="item">
                        <div>{{ item.BankName }}</div>
                      </ng-template>
                    </p-dropdown>
                  </div>
                </div>
              </div>

              <div class="row g-3 align-items-center mb-2">
                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Consignee Name <span>*</span></label
                  >
                  <div class="col-7">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Consignee Name"
                      formControlName="Consignee_Name"
                      readonly
                    />
                  </div>
                </div>

                <div class="col-md-2"></div>

                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Customer Bank Name <span>*</span></label
                  >
                  <div class="col-7">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Customer Bank Name"
                      formControlName="Customer_Bank"
                    />
                  </div>
                </div>
              </div>

             
              <div class="row g-3 align-items-center mb-2" *ngIf="!isEdit" >
                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >PIs <span>*</span></label
                  >
                  <div class="col-7">
                    <p-dropdown
                      [style]="{ width: '100%' }"
                      [options]="PIList"
                      optionLabel="label"
                      [filter]="true"
                      filterBy="label"
                      [showClear]="true"
                      placeholder="Please Select"
                      optionValue="value"
                      formControlName="PI"
                      (onChange)="getCashReceiveInfoByPI()"
                    >
                      <ng-template let-PI pTemplate="item">
                        <div>{{ PI.label }}</div>
                      </ng-template>
                    </p-dropdown>
                  </div>
                </div>

                <div class="col-md-2"></div>

                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >PI Value <span>*</span></label
                  >
                  <div class="col-7">
                    <div class="input-group">
                      <span class="input-group-text">BDT</span>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="PI Value"
                        formControlName="PIValue"
                        readonly
                      />
                    </div>
                  </div>
                </div>
              </div>

              <!-- Receive Amount & Receive Date -->
              <div class="row g-3 align-items-center mb-2">
                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Receive Amount <span>*</span></label
                  >
                  <div class="col-7">
                    <input
                      type="number"
                      class="form-control"
                      placeholder="Receive Amount"
                      formControlName="ReceiveAmount"
                      (keyup)="checkReceiveAmount()"
                      (change)="checkReceiveAmountOnChange()"
                    />
                  </div>
                </div>

                <div class="col-md-2"></div>

                <div class="col-md-5 d-flex align-items-center" *ngIf="!isEdit">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Receive Date <span>*</span></label
                  >
                  <div class="col-7">
                   
                    <p-calendar
                      formControlName="ReceiveDate"
                      [showIcon]="false"
                      dateFormat="dd/mm/yy"
                      placeholder="Select Date"
                      class="w-100"
                      [style]="{ width: '100%' }"
                      inputStyleClass="form-control custom-date-input"
                    ></p-calendar>
                  </div>
                </div>
              </div>

              <!-- Issue Date & Payment Terms -->
              <div class="row g-3 align-items-center mb-2">
                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Issue Date <span>*</span></label
                  >
                  <div class="col-7">
                    <!-- <input
                      type="date"
                      class="form-control"
                      formControlName="IssueDate"
                    /> -->
                    <p-calendar
                      formControlName="IssueDate"
                      [showIcon]="false"
                      dateFormat="dd/mm/yy"
                      placeholder="Select Date"
                      class="w-100"
                      [style]="{ width: '100%' }"
                      inputStyleClass="form-control custom-date-input"
                    ></p-calendar>
                  </div>
                </div>

                <div class="col-md-2"></div>

                <div class="col-md-5 d-flex align-items-center">
                  <label class="text-end fs-6 fw-bold me-2 mb-0 col-5"
                    >Payment Terms (LC) <span>*</span></label
                  >
                  <div class="col-7">
                    <p-dropdown
                      [style]="{ width: '100%' }"
                      [options]="PaymentTerms"
                      optionLabel="Mode"
                      [filter]="true"
                      filterBy="Mode"
                      [showClear]="true"
                      placeholder="Please Select"
                      optionValue="Payment_Term_ID"
                      formControlName="PaymentTerms"
                    >
                      <ng-template let-PaymentTerms pTemplate="item">
                        <div>{{ PaymentTerms.Mode }}</div>
                      </ng-template>
                    </p-dropdown>
                  </div>
                </div>
              </div>

              <!-- Remarks (Left side only) -->
              <div class="row g-3 align-items-start mb-2">
                <!-- Left Column: Remarks + Buttons -->
                <div class="col-md-5">
                  <!-- Remarks Input -->
                  <div class="d-flex align-items-center mb-2">
                    <label class="text-end fw-semibold me-2 mb-0 col-5"
                      >Remarks</label
                    >
                    <div class="col-7">
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Remarks"
                        formControlName="Remarks"
                      />
                    </div>
                  </div>

                  <!-- Buttons directly under Remarks input -->
                  <div
                    class="d-flex gap-2 mt-2"
                    style="margin-left: calc(5 / 12 * 100%)"
                  >
                    <button
                      class="btn btn-w-xl text-white theme-btn px-5"
                      type="button"
                      (click)="saveData()"
                      [disabled]="Formgroup.invalid"
                      [hidden]="isEdit"
                    >
                      Save
                    </button>

                    <button
                      class="btn btn-w-xl text-white theme-btn-edit px-5"
                      type="button"
                      (click)="updateData()"
                      [disabled]="Formgroup.invalid"
                      [hidden]="!isEdit"
                    >
                      Update
                    </button>
                  </div>
                </div>

                <!-- Right Column: Empty -->
                <div class="col-md-7"></div>
              </div>
            </form>
          </div>
          <div class="d-flex justify-content-start mt-5 gap-2">
            <a href="" class="text-danger">Back to list</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
