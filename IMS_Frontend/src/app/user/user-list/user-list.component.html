<div class="m-2 p-2 ">
  <div class="card shadow">
  <div class="card-header theme-bg" >
    <h2 class="p-2 font-weight-bold"><i class="fas fa-list-alt fa-1x"></i>&nbsp;User List</h2>
  </div>
  <div class="card-body">
    <form [formGroup]="SearchForm">
        <div class="row align-items-center">
          
          <div class="col-md-3">
              <label>Role <span>*</span></label>
              <p-dropdown
                [style]="{'width':'100%'}"
                class="p-0"
                [options]="RoleList"
                optionLabel="Role_Name"
                [filter]="true"
                filterBy="Role_Name"
                [showClear]="true"
                styleClass="listBottom"
                placeholder="Please Select"
                optionValue="Role_Id"
                formControlName="Role"
              >
                <ng-template let-Role pTemplate="item">
                  <div class="flex align-items-center gap-2">
                    <div>{{ Role.Role_Name }}</div>
                  </div>
                </ng-template>
              </p-dropdown>
            </div>
          <div class="col-3">
            <button title="Search" type="button" (click)="Search()" class="btn btn-sm theme-btn mt-4 p-1 ">
              <i class="fas fa-search"></i>&nbsp;Search</button>
          </div>
        </div>
      </form>
      <hr>
        <p-table #dt [value]="tableData" [paginator]="true" [rows]="pageSize" [rowsPerPageOptions]='["30","20","10"]' 
        [responsive]="true" [showCurrentPageReport]="true" (onPageChange)="onPageChange($event)"
        [rowsPerPageOptions]="rowsPerPageOptions"
        [globalFilterFields]="['UserName','Role_Name','Superior']"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">

        <ng-template pTemplate="caption">
          <div class="table-toolbar">
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')"
                placeholder="Global Search" />
            </span>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th class="">SL</th>
            <th class="">User Name</th>
            <th class="">Role Name</th>
            <th class="">Superior</th>
            <th class="" *ngIf="allPersmissions">Action</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-table let-i="rowIndex">
          <tr>
            <td class="text-center">{{ (dt.first || 0) + i + 1 }}</td>
            <td class="text-center align-middle">{{table.UserName}}</td>
            <td class="text-center align-middle">{{table.Role_Name}}</td>
            <td class="text-center align-middle">{{table.Superior}}</td>
            <td class="text-center align-middle p-1 m-0">
              <div class="d-flex justify-content-center gap-1">
                <a class="btn theme-btn-view " target="_blank" title="View" (click)="viewDetails(table)"><i
                    class="fa fa-eye"></i></a>

                <a class="btn theme-btn-edit" target="_blank" title="Edit"
                  [routerLink]="['/user-create']" [queryParams]="{Id:table.User_ID}"><i class="fa fa-edit"></i></a>

                <button class="btn theme-btn-delete " title="Delete"
                  (click)="DeleteData(table)"><i class="fas fa-trash"></i></button>
              </div>

            </td>
          </tr>
        </ng-template>

      </p-table>       
      </div>
</div>

<div class="position-fixed mr-5 mb-4" style="right: 0; bottom: 0;z-index: 100;" >
  <a class="btn btn-float btn-lg rounded-circle bg-gradient-maroon" [routerLink]="['/user-create']" target="_blank" title="Create Users" *ngIf="insertPermissions"><i
      class="fa fa-plus"></i></a>
</div>


</div>

